{% extends "base.html" %}

{% block content %}
<style>
    /* General Styles for the dashboard layout */
    .dashboard-container {
        padding: 20px;
        font-family: Arial, sans-serif;
    }

    /* Styling for Headings */
    .dashboard-container h2 {
        color: #0056b3; /* Darker blue */
        font-family: 'Georgia', serif;
        font-size: 28px;
        border-bottom: 3px solid #0056b3;
        padding-bottom: 10px;
        margin-bottom: 30px;
    }

    .dashboard-container h3 {
        color: #28a745; /* Green for section headers */
        font-family: 'Verdana', sans-serif;
        font-size: 22px;
        margin-top: 30px;
        margin-bottom: 15px;
    }

    /* General Table Styling */
    .dashboard-container table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 40px;
        background-color: #f9f9f9;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    /* Overall Status Table (Simpler, two-column layout) */
    .dashboard-container h3:first-of-type + table {
        background-color: #eaf6ff; /* Light blue background for overall status */
    }

    .dashboard-container table th,
    .dashboard-container table td {
        padding: 12px 15px;
        text-align: left;
        border: 1px solid #ddd;
    }

    .dashboard-container table th {
        background-color: #007bff; /* Primary blue header */
        color: white;
        font-weight: 600;
        width: 20%; /* Keep th width consistent for overall table */
    }

    /* Block-wise Occupancy Table (More complex header) */
    .dashboard-container h3:nth-of-type(2) + table th {
        background-color: #343a40; /* Darker header for detailed stats */
    }

    /* Highlight Occupancy Rate */
    .dashboard-container table strong {
        color: #dc3545; /* Red for high visibility/warning */
        font-size: 1.1em;
    }

    /* Stripe rows for better readability */
    .dashboard-container table tbody tr:nth-child(even) {
        background-color: #f1f1f1;
    }

    .dashboard-container table tbody tr:hover {
        background-color: #e9ecef;
    }
</style>

<div class="dashboard-container">
    <h2>Hostel Statistics Dashboard</h2>

    <h3>Overall Status</h3>
    <table>
        <tr>
            <th>Total Rooms</th>
            <td>{{ global_stats.total_rooms }}</td>
            <th>Total Beds</th>
            <td>{{ global_stats.total_beds }}</td>
        </tr>
        <tr>
            <th>Occupied Beds</th>
            <td>{{ global_stats.occupied_beds }}</td>
            <th>Unoccupied Beds</th>
            <td>{{ global_stats.unoccupied_beds }}</td>
        </tr>
        <tr>
            <th>Occupancy Rate</th>
            <td colspan="3"><strong>{{ global_stats.occupancy_percent }}%</strong></td>
        </tr>
        <tr>
            <th>Current Guests</th>
            <td>{{ global_stats.total_persons }}</td>
            <th>Staff Members</th>
            <td>{{ global_stats.total_workers }}</td>
        </tr>
    </table>

    <hr>

    <h3>Block-wise Occupancy</h3>
    <table>
        <thead>
            <tr>
                <th>Block Name</th>
                <th>Rooms</th>
                <th>Total Beds</th>
                <th>Occupied Beds</th>
                <th>Unoccupied Beds</th>
                <th>Occupancy (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for stat in block_stats %}
            <tr>
                <td>{{ stat.name }}</td>
                <td>{{ stat.total_rooms }}</td>
                <td>{{ stat.total_beds }}</td>
                <td>{{ stat.occupied_beds }}</td>
                <td>{{ stat.unoccupied_beds }}</td>
                <td>
                    <strong style="color: {{ 'green' if stat.occupancy_percent < 50 else 'orange' if stat.occupancy_percent < 80 else 'red' }};">{{ stat.occupancy_percent }}%</strong>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}